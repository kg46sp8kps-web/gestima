# GESTIMA Multi-Agent System Configuration
# Version: 2.0 — Claude Code Native
# Last Updated: 2026-02-04
#
# Tento config popisuje reálné parametry Claude Code Task tool.
# Agent definice: .claude/agents/*.md

---

## Jak to funguje
#
# Claude Code podporuje:
#   - Task tool s parametry: subagent_type, model, prompt, run_in_background, resume
#   - Custom agent definice v .claude/agents/*.md
#   - Modely: haiku, sonnet, opus
#
# Claude Code NEPODPORUJE (nemá smysl konfigurovat):
#   - temperature (pevně daná per model)
#   - max_tokens (řízeno platformou)
#   - retry_backoff (řízeno platformou)
#   - custom API timeouts

---

## Agent Definitions (.claude/agents/)

agents:

  sefik:
    file: .claude/agents/sefik.md
    model: sonnet                        # Orchestrace — rychlý + chytrý
    subagent_type: general-purpose       # Potřebuje všechny nástroje
    role: Multi-agent orchestrátor s osobností
    activation: "aktivuj ŠÉFÍKA" | "/agents" | complex task

  backend:
    file: .claude/agents/backend.md
    model: sonnet                        # Code generation — potřebuje kvalitu
    subagent_type: general-purpose       # Read, Edit, Write, Bash, Grep
    role: FastAPI + SQLAlchemy + Pydantic

  frontend:
    file: .claude/agents/frontend.md
    model: sonnet                        # Vue 3 komponenty — potřebuje kvalitu
    subagent_type: general-purpose       # Read, Edit, Write, Bash, Grep
    role: Vue 3 + Pinia + TypeScript

  qa:
    file: .claude/agents/qa.md
    model: haiku                         # Test execution — rychlý + levný
    subagent_type: general-purpose       # Bash pro testy + Read pro kód
    role: pytest + Vitest + performance

  auditor:
    file: .claude/agents/auditor.md
    model: opus                          # Kritický review — potřebuje nejlepší reasoning
    subagent_type: general-purpose       # Read + Grep only (READ-ONLY agent!)
    role: ADR compliance, anti-patterns, security, VISION

  devops:
    file: .claude/agents/devops.md
    model: haiku                         # Git ops — deterministické, rychlé
    subagent_type: general-purpose       # Bash pro git + Edit pro CHANGELOG
    role: Git, build, versioning, deployment

---

## Task Routing (rozhodovací matice)

routing:
  typo_fix:
    agents: [devops]
    parallel: false

  bug_fix_frontend:
    agents: [frontend, qa]
    parallel: false
    order: sequential

  bug_fix_backend:
    agents: [backend, qa]
    parallel: false
    order: sequential

  new_endpoint:
    agents: [backend, frontend, qa, auditor]
    parallel: true
    notes: "backend + frontend paralelně → qa → auditor"

  new_component:
    agents: [frontend, qa]
    parallel: false

  schema_change:
    agents: [backend, auditor, frontend, qa]
    parallel: false
    order: "STRIKTNĚ sekvenčně! DB first."

  refactor:
    agents: [backend, frontend, auditor, qa]
    parallel: true
    notes: "backend + frontend paralelně → auditor → qa"

---

## Jak ŠÉFÍK spouští agenty (reálný Claude Code syntax)

# Příklad spuštění backend agenta:
#
#   Task tool:
#     subagent_type: "general-purpose"
#     model: "sonnet"
#     prompt: |
#       [Obsah z .claude/agents/backend.md]
#
#       ÚKOL: [konkrétní zadání]
#       KONTEXT: [relevantní ADRs, pravidla]
#     run_in_background: true    # pro paralelní běh
#
# Příklad paralelního spuštění (backend + frontend):
#
#   V jedné zprávě poslat DVA Task tool cally:
#     1. Task(backend, model=sonnet, run_in_background=true)
#     2. Task(frontend, model=sonnet, run_in_background=true)

---

## Model Selection Rationale

# haiku:  QA, DevOps — deterministické úlohy, rychlost, nízká cena
# sonnet: Backend, Frontend, ŠÉFÍK — code generation, orchestrace
# opus:   Auditor ONLY — kritický review, architektonické rozhodnutí
#
# Proč Opus jen pro Auditor?
# - Chyba v review = technický dluh za tisíce
# - Potřebuje nuancované ADR rozhodování
# - Potřebuje vidět VISION alignment
# - Rychlost není kritická (review může počkat)

---

# Maintained by: Development Team
# Status: ✅ Production (Claude Code native)
